# Pre-computed V-JEPA2 features data configuration
# For training the AC Predictor with pre-encoded video features
#
# IMPORTANT: num_timesteps refers to ENCODED timesteps in the precomputed .npy files,
# NOT original video frames. For V-JEPA2 with tubelet_size=2:
#   num_timesteps = original_frames // 2 (e.g., 16 frames -> 8 timesteps)

_target_: src.datamodules.PrecomputedFeaturesDataModule

# Data paths
data_dir: ${paths.data_dir}

# File structure settings
feature_map_name: "vjepa2_vitl16"  # Name of feature map file (without .npy)
clip_prefix: "clip_"  # Prefix for clip directories

# Clip range filtering (optional)
# Filter clips by their numeric ID (e.g., clip_00042 -> 42)
# clip_start: inclusive, clip_end: exclusive
# Example: clip_start=0, clip_end=5000 selects clips 0-4999
clip_start: 17000  # Start of clip range (inclusive), null = no lower bound
clip_end: 22000    # End of clip range (exclusive), null = no upper bound

# Validation split (percentage-based)
# The last N% of clips (by ID) are used for validation.
# e.g., val_split=0.1 with clip_end=5000 uses clips 4500-4999 for validation
val_split: 0.1  # Fraction for validation (0.0 = no validation, 0.1 = 10%)

# Dataset settings
num_timesteps: 8  # Encoded timesteps per sample (16 original frames / tubelet_size=2)
patches_per_frame: 256  # Patches per frame for ViT-L (16x16 patches)
use_extrinsics: false

# DataLoader settings
batch_size: 64
num_workers: 8
pin_memory: true
persistent_workers: true  # Keep workers alive between epochs (disable on MPS to save memory)
